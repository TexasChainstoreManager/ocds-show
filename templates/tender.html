<section id="tender" class="panel panel-default">
	<div class="panel-heading">
		<h2>Tender</h2>
	</div>
  
  		<!-- outstanding fields
		
		procuringEntity [organisation]
		
		numberOfTenderers
		tenderers [organisations]

		milestones []
		
		-->
		
		<!-- also need to add error handling for all fields -->
		
		<!-- is there a way we can reference codelist titles and descriptions? Using a custom filter or function -->
		
		<!-- should i go through and add elif field|length == 0 then warning ?-->
	
	<div class="panel-body">
		<div class="row">
			<div class="col-md-4">
				<div class="panel panel-{% if tender.description %}default{% else %}warning{% endif %}">
					<div class="panel-heading">
						<h3 class="panel-title">
							{{ "Description" | gettext }}
						</h3>
					</div>
					<div class="panel-body">
						{% if tender.description %}
							{{ tender.description }}
						{% else %}
							{{ "No description provided" | gettext }}
						{% endif %}
					</div>
				</div>
			</div>
			<div class="col-md-4">
				<div class="panel panel-{% if tender.status %}default{% else %}warning{% endif %}">
					<div class="panel-heading">
						<h3 class="panel-title">
							{{ "Status" | gettext }}
						</h3>
					</div>
					<div class="panel-body">
						<h4>
						{% if tender.status %}
							{{ tender.status }}
						{% else %}
							{{ "No status provided" | gettext }}
						{% endif %}
						</h4>
					</div>
				</div>
			</div>
			<div class="col-md-4">
				<div class="panel panel-{% if tender.minValue.amount or tender.value.amount %}default{% else %}warning{% endif %}">
					<div class="panel-heading">
						<h3 class="panel-title">
							{{ "Value" | gettext }}
						</h3>
					</div>
					<div class="panel-body">
						<strong>{{ "Lower: " | gettext}}</strong>
						{% if tender.minValue.amount %}
							{{ tender.minValue.amount|currency }} <small>{{ tender.minValue.currency}}</small>
						{% else %}
							<span class="bg-warning">{{ "No minimum value provided" | gettext }}</span>
						{% endif %}
						<p><strong>{{ "Upper: " | gettext}}</strong>
						{% if tender.value.amount %}
							{{ tender.value.amount|currency }} <small>{{ tender.value.currency}}</small></p>
						{% else %}
							<span class="bg-warning">{{ "No value provided" | gettext }}</span>
						{% endif %}
					</div>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-md-4">
				<div class="panel panel-{% if tender.eligibilityCriteria %}default{% else %}warning{% endif %}">
					<div class="panel-heading">
						<h3 class="panel-title">
							{{ "Eligibility criteria" | gettext}}
						</h3>
					</div>
					<div class="panel-body">
						{% if tender.eligibilityCriteria %}
							{{ tender.eligibilityCriteria }}
						{% else %}
							{{ "No eligibility criteria provided" | gettext }}
						{% endif %}
					</div>
				</div>
			</div>
			<div class="col-md-4">
				<div class="panel panel-{% if tender.tenderPeriod %}default{% else %}warning{% endif %}">
					<div class="panel-heading">
						<h3 class="panel-title">
							{{ "Key Dates" | gettext}}
						</h3>
					</div>
					<div class="panel-body">	<!-- add time hover over? -->
						<p>
							<strong>{{ "Tender start: " | gettext}}</strong>
							{% if tender.tenderPeriod.startDate %}
								{{ tender.tenderPeriod.startDate|truncate(10,true,"")}}
							{% else %}
								<span class="bg-warning">{{ "No start date provided" | gettext }}</span>
							{% endif %}
						</p>
						<p>
							<strong>{{ "Tender end: " | gettext}}</strong>
							{% if tender.tenderPeriod.endDate %}
								{{ tender.tenderPeriod.endDate|truncate(10,true,"")}}
							{% else %}
								<span class="bg-warning">{{ "No end date provided" | gettext }}</span>
							{% endif %}
						</p>
						<p>
							<strong>{{ "Award start: " | gettext}}</strong>
							{% if tender.awardPeriod.startDate %}
								{{ tender.awardPeriod.startDate|truncate(10,true,"")}}
							{% else %}
								<span class="bg-warning">{{ "No start date provided" | gettext }}</span>
							{% endif %}
						</p>
						<p>	
							<strong>{{ "Award end: " | gettext}}</strong>
							{% if tender.awardPeriod.endDate %}
								{{ tender.awardPeriod.endDate|truncate(10,true,"")}}
							{% else %}
								<span class="bg-warning">{{ "No end date provided" | gettext }}<span>
							{% endif %}
						</p>
					</div>
				</div>
			</div>
			<div class="col-md-4">
				<div class="panel panel-{% if tender.enquiryPeriod %}default{% else %}warning{% endif %}">
					<div class="panel-heading">
						<h3 class="panel-title">
							{{ "Enquiries" | gettext}}
						</h3>
					</div>
					<div class="panel-body">
						<p>
						{% if tender.hasEnquiries == false %}
							{{ "There have been no enquiries regarding this tender" | gettext }}
						{% elif tender.hasEnquiries %}
							{{ "There have been enquiries regarding this tender" | gettext }}
						{% else %}
							<span class="bg-warning">{{ "No information on enquiries provided" | gettext }}</span>
						{% endif %}
						</p>
						<p>
							<strong>{{ "Enquiries start: " | gettext}}</strong>
							{% if tender.enquiryPeriod.startDate %}
								{{ tender.enquiryPeriod.startDate|truncate(10,true,"")}}
							{% else %}
								<span class="bg-warning">{{ "No start date provided" | gettext }}</span>
							{% endif %}
						</p>
						<p>
							<strong>{{ "Enquiries end: " | gettext}}</strong>
							{% if tender.enquiryPeriod.endDate %}
								{{ tender.enquiryPeriod.endDate|truncate(10,true,"")}}
							{% else %}
								<span class="bg-warning">{{ "No end date provided" | gettext }}</span>
							{% endif %}
						</p>
					</div>
				</div>
			
			</div>
		</div>
		<div class="row">
			<div class="col-md-4">
				<div class="panel panel-{% if tender.procurementMethod %}default{% else %}warning{% endif %}">
					<div class="panel-heading">
						<h3 class="panel-title">
							{{ "Procurement method" | gettext }}
						</h3>
					</div>
					<div class="panel-body">
						{% if tender.procurementMethod %}
							<h4>{{ tender.procurementMethod}}</h4>	<!-- set up a filter or function to convert between codelist values and titles -->
						{% else %}
							<h4>No procurement method provided</h4>
						{% endif %}
						<p>
							{% if tender.procurementMethodRationale %}
								{{ tender.procurementMethodRationale}}
							{% else %}
								<span class="bg-warning">{{ "No rationale provided" | gettext }}</span>
							{% endif %}
						</p>
					</div>
				</div>
			</div>
			<div class="col-md-4">
				<div class="panel panel-{% if tender.awardCriteria %}default{% else %}warning{% endif %}">
					<div class="panel-heading">
						<h3 class="panel-title">
							{{ "Award criteria" | gettext }}
						</h3>
					</div>
					<div class="panel-body">
						<h4>
							{% if tender.awardCriteria %}
								{{ tender.awardCriteria }}
							{% else %}
								{{ "No award criteria provided" | gettext }}
							{% endif %}
						</h4>
						<p>
							{% if tender.awardCriteriaDetails %}
								{{ tender.awardCriteriaDetails }}
							{% else %}
								<span class="bg-warning">{{ "No award criteria details provided" | gettext}}</span>
							{% endif %}
						</p>
					</div>
				</div>
			</div>
			<div class="col-md-4">
				<div class="panel panel-{% if tender.submissionMethod %}default{% else %}warning{% endif %}">
					<div class="panel-heading">
						<h3 class="panel-title">
							{{ "Submission method" | gettext }}
						</h3>
					</div>
					<div class="panel-body">
						<h4>
							{% if tender.submissionMethod %}
								{{ tender.submissionMethod|join(", ")}}
							{% else %}
								{{ "No submission method provided" | gettext }}
							{% endif %}
						</h4>
						<p>
							{% if tender.submissionMethodDetails %}
								{{ tender.submissionMethodDetails}}
							{% else %}
								<span class="bg-warning">{{ "No submission method details provided" | gettext}}</span>
							{% endif %}
						</p>
					</div>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-md-12">
				{% if tender.items %}
					{% set foo = tender.items %}
					{% include 'items.html' %}
				{% else %}
					<div class="panel panel-warning">
						<div class="panel-heading">
							<h3 class="panel-title">
								{{ "Items" | gettext }}
							</h3>
						</div>
						<div class="panel-body">
							{{ "No items provided" | gettext }}
						</div>
					</div>
				{% endif %}
			</div>
		</div>
		<div class="row">
			<div class="col-md-12">
				{% if tender.documents %}
					{% set documents = tender.documents %}
					{% include 'documents.html' %}
				{% else %}
					<div class="panel panel-warning">
						<div class="panel-heading">
							<h3 class="panel-title">
								{{ "Documents" | gettext }}
							</h3>
						</div>
						<div class="panel-body">
							{{ "No documents provided" | gettext }}
						</div>
					</div>
				{% endif %}
			</div>
		</div>
	</div>
</section>
